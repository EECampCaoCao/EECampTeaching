// Generated by CoffeeScript 1.9.3
(function() {
  var root;

  window.App = {};

  root = window.App;

  $(window).on('beforeunload', function() {
    return root.ws.close();
  });

  $(function(event) {
    var c, editor, fn, i, len, ref;
    root.connect();
    root.scene.start();
    $('#ss-btn').click(function() {
      console.log(456);
      $.post('/', {
        action: 'start'
      });
      return root.ws.open();
    });
    $('#start-btn').click(function() {
      root.ws.sendJSON({
        action: 'start',
        args: []
      });
      return root.clearChart();
    });
    $('#stop-btn').click(function() {
      console.log(123);
      $.post('/', {
        action: 'stop'
      });
      return root.ws.close();
    });
    $('#code-btn').click(function() {
      return $('#code-wrapper').show(200, function() {
        return $('#code-area textarea').focus();
      });
    });
    $('#reset-btn').click(function() {
      return root.scene.controls.reset();
    });
    ref = ['P', 'I', 'D'];
    fn = function(cc) {
      return $('#range-' + c).change(function() {
        $(this).prev().text($(this).val() + '%');
        root.ws.sendJSON({
          action: 'tweak',
          args: [cc, parseFloat($(this).val()) * 0.01]
        });
      }).focus(function() {
        return $(this).blur();
      });
    };
    for (i = 0, len = ref.length; i < len; i++) {
      c = ref[i];
      fn(c);
    }
    $('#switch-panel>li').click(function() {
      var me;
      me = $(this);
      $(this).siblings().removeClass('active');
      $(this).addClass('active');
      return root.changeChart(me.attr('data'));
    });
    editor = ace.edit('code-area');
    editor.setTheme("ace/theme/tomorrow_night_bright");
    editor.getSession().setMode("ace/mode/python");
    root.editor = editor;
    $.get('/mypid.py', function(data) {
      console.log(data);
      return root.editor.setValue(data);
    });
    $('#return-btn').click(function() {
      console.log(123);
      return $('#code-wrapper').hide(200);
    });
    return $('#run-btn').click(function() {
      $.post('/runCode', {
        code: root.editor.getValue()
      });
      return root.ws.open();
    });
  });

}).call(this);
